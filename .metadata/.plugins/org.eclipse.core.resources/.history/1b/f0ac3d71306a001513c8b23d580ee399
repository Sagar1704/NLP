package sea.nlp.ngram;

import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.Scanner;

public class Unigram extends NGram implements Unsmoothed, Smoothed {
	private static int totalUnigramCount;
	
	public Unigram() {
		super(null);
	}
	
	public Unigram(ArrayList<String> words) {
		super(words);
	}

	public List<Unigram> generateUnigrams(File input) throws FileNotFoundException {

		List<Unigram> unigrams = new ArrayList<Unigram>();
		Scanner scanner = new Scanner(input);
		try {
			while (scanner.hasNextLine()) {
				totalUnigramCount++;
				
				String token = scanner.nextLine();
				ArrayList<String> tempList = new ArrayList<String>();
				tempList.add(token);
				Unigram unigram = new Unigram(tempList);
				if (!unigrams.contains(unigram)) {
					unigrams.add(unigram);
				} else {
					unigram = unigrams.get(unigrams.indexOf(unigram));
					unigram.setCount(unigram.getCount() + 1);
				}
			}
		} finally {
			scanner.close();
		}
		return unigrams;
	}

	@Override
	public ArrayList<NGram> calculateSmoothedProbability(ArrayList<NGram> unigrams) {
		
		return unigrams;
	}

	@Override
	public ArrayList<NGram> calculateUnsmoothedProbability(ArrayList<NGram> unigrams) {
		for (Iterator<NGram> unigramIterator = unigrams.iterator(); unigramIterator.hasNext();) {
			NGram nGram = (NGram) unigramIterator.next();
			
			nGram.setProbability(nGram.getCount()/totalUnigramCount);
		}
		
		return unigrams;
	}

	public int getTotalUnigramCount() {
		return totalUnigramCount;
	}

	@Override
	public String toString() {
		return getWords().toString() + "\t\t\t" + getProbability();
	}

	
}
